<!DOCTYPE html>
<html lang="en">
<head>
<script>
  MathJax = { 
    tex: {
		    inlineMath: [['$','$'], ['\\(','\\)']]
	} }
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<meta name="generator" content="plasTeX" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Loops</title>
<link rel="next" href="chap-local.html" title="Local theory of convex integration" />
<link rel="prev" href="sect0001.html" title="Introduction" />
<link rel="up" href="index.html" title="The sphere eversion project" />
<link rel="stylesheet" href="styles/theme-blue.css" />
<link rel="stylesheet" href="styles/amsthm.css" />
<link rel="stylesheet" href="styles/showmore.css" />
<link rel="stylesheet" href="styles/stylecours.css" />
</head>

<body>
<header>
<svg  id="toc-toggle" class="icon icon-list-numbered "><use xlink:href="symbol-defs.svg#icon-list-numbered"></use></svg>
<h1 id="doc_title"><a href="index.html">The sphere eversion project</a></h1>
</header>

<div class="wrapper">
<nav class="toc">
<ul class="sub-toc-0">
<li class="">
  <a href="sect0001.html"><span class="toc_ref"></span> <span class="toc_entry">Introduction</span></a>
 </li>
<li class=" active current">
  <a href="chap-loops.html"><span class="toc_ref">1</span> <span class="toc_entry">Loops</span></a>
  <span class="expand-toc">‚ñº</span>
  <ul class="sub-toc-1 active">
     <li class="">
  <a href="chap-loops.html#sec:loops_introduction"><span class="toc_ref">1.1</span> <span class="toc_entry">Introduction</span></a>
 </li>
<li class="">
  <a href="chap-loops.html#sec:preliminaries"><span class="toc_ref">1.2</span> <span class="toc_entry">Preliminaries</span></a>
 </li>
<li class="">
  <a href="chap-loops.html#a0000000011"><span class="toc_ref">1.3</span> <span class="toc_entry">Constructing loops</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="chap-local.html"><span class="toc_ref">2</span> <span class="toc_entry">Local theory of convex integration</span></a>
  <span class="expand-toc">‚ñ∂</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="chap-local.html#sec:convex_integration_intro"><span class="toc_ref">2.1</span> <span class="toc_entry">Key construction</span></a>
 </li>
<li class="">
  <a href="chap-local.html#sec:inductive_step"><span class="toc_ref">2.2</span> <span class="toc_entry">The main inductive step</span></a>
 </li>
<li class="">
  <a href="chap-local.html#sec:ample_differential_relations"><span class="toc_ref">2.3</span> <span class="toc_entry">Ample differential relations</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="chap-global.html"><span class="toc_ref">3</span> <span class="toc_entry">Global theory of open and ample relations</span></a>
  <span class="expand-toc">‚ñ∂</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="chap-global.html#a0000000012"><span class="toc_ref">3.1</span> <span class="toc_entry">Preliminaries</span></a>
 </li>
<li class="">
  <a href="chap-global.html#a0000000013"><span class="toc_ref">3.2</span> <span class="toc_entry">First order differential relations</span></a>
 </li>
<li class="">
  <a href="chap-global.html#sec:general_theory"><span class="toc_ref">3.3</span> <span class="toc_entry">The \(h\)-principle for open and ample differential relations</span></a>
 </li>

  </ul>
 </li>
<li ><a href="dep_graph_document.html">Dependency graph</a></li>
</ul>
</nav>

<div class="content">
<div class="content-wrapper">


<div class="main-text">
<h1 id="chap:loops">1 Loops</h1>

<h1 id="sec:loops_introduction">1.1 Introduction</h1>

<p>In this chapter, we explain how to construct families of loops to feed into the corrugation process explained at the end of the introduction. A loop is a map defined on the circle \(ùïä^1 = ‚Ñù/‚Ñ§\) with values in a finite-dimensional vector space. It can also freely be seen as \(1\)-periodic maps defined on \(‚Ñù\). </p>
<p><div class="definition_thmwrapper" id="def:average">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">1.1</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#def:average">#</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/basic.lean#L361">loop.average</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="definition_thmcontent">
  <p>  The average of a loop \(Œ≥\) is \(\barŒ≥ := \int _{ùïä^1} Œ≥(s)\,  ds\). </p>

  </div>
</div> </p>
<p>Throughout this document, \(E\) and \(F\) will denote finite-dimensional real vector spaces. </p>
<p><div class="definition_thmwrapper" id="def:loop_family_support">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">1.2</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#def:loop_family_support">#</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/basic.lean#L203">loop.support</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="definition_thmcontent">
  <p> The <em>support</em> of a family \(Œ≥\) of loops in \(F\) parametrized by \(E\) is the closure of the set of \(x\) in \(E\) such that \(Œ≥_x\) is not a constant loop. </p>

  </div>
</div> </p>
<p>All of this chapter is devoted to proving the following proposition. </p>
<p><div class="proposition_thmwrapper" id="prop:loops">
  <div class="proposition_thmheading">
    <span class="proposition_thmcaption">
    Proposition
    </span>
    <span class="proposition_thmlabel">1.3</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#prop:loops">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000014"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/exists.lean#L249">exists_loops</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="proposition_thmcontent">
  <p>  Let \(K\) a compact set in \(E\). Let \(Œ©\) be an open set in \(E √ó F\). </p>
<p>Let \(Œ≤\) and \(g\) be smooth maps from \(E\) to \(F\). Write \(Œ©_x := \{  y ‚àà F \mid (x, y) ‚àà Œ©\} \), assume that \(Œ≤(x) ‚àà Œ©_x\) for all \(x\), and that \(g(x) = Œ≤(x)\) near \(K\). </p>
<p>If, for every \(x\), \(g(x)\) is in the convex hull of the connected component of \(Œ©_x\) containing \(Œ≤(x)\), then there exists a smooth family of loops </p>
<div class="displaymath" id="a0000000015">
  \[  Œ≥ \! :E √ó [0, 1] √ó ùïä^1 ‚Üí F, (x, t, s) ‚Ü¶ Œ≥^t_x(s)  \]
</div>
<p> such that, for all \(x ‚àà E\), all \(t ‚àà ‚Ñù\) and all \(s ‚àà ùïä^1\), </p>
<ul class="itemize">
  <li><p>\(Œ≥^t_x(s) ‚àà Œ©_x\) </p>
</li>
  <li><p>\(Œ≥^0_x(s) = Œ≥^t_x(1) = Œ≤(x)\) </p>
</li>
  <li><p>\(\barŒ≥^1_x = g(x)\) </p>
</li>
  <li><p>\(Œ≥^t_x(s) = Œ≤(x)\) if \(x\) is near \(K\). </p>
</li>
</ul>

  </div>
</div> </p>
<p>Let us briefly sketch the geometric idea behind the above proposition if we pretend there is only one point \(x\), and drop it from the notation, and also focus only on \(Œ≥^1\). By assumption, there is a finite collection of points \(p_i\) in \(Œ©\) and \(Œª_i ‚àà [0, 1]\) such that \(g\) is the barycenter \(\sum Œª_i p_i\). Since \(Œ©\) is open and connected, there is a smooth loop \(Œ≥_0\) which goes through each \(p_i\). The claim is that \(g\) is the average value of \(Œ≥ = Œ≥_0 ‚àò h\) for some self-diffeomorphism \(h\) of \(ùïä^1\). The idea is to choose \(h\) such that \(Œ≥\) rushes to \(p_1\), stays there during a time roughly \(Œª_1\), rushes to \(p_2\), etc. But, in order to achieve average exactly \(g\), it seems like \(h\) needs to be a discontinuous piecewise constant map. The assumption that \(Œ©\) is open means that the convex hull is open, which gives enough slack to get away with a smooth \(h\). </p>
<p>In the previous proof sketch, there is a lot of freedom in constructing \(Œ≥\), which is problematic when trying to do it consistently when \(x\) varies. </p>
<h1 id="sec:preliminaries">1.2 Preliminaries</h1>

<p>In this section, \(E\) is a real vector space with (finite) dimension \(d\). We‚Äôll need the Carath√©odory lemma: </p>
<p><div class="lemma_thmwrapper" id="lem:caratheodory">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.4</span>
    <span class="lemma_thmtitle">Carath√©odory‚Äôs lemma</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:caratheodory">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000016"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/mathlib/blob/5a017443e131d3f66eeda6d2a4dc038e899ca6d5/src/analysis/convex/caratheodory.lean#L143">convex_hull_eq_union</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   If a point \(x\) of \(E\) lies in the convex hull of a set \(P\), then \(x\) belongs to the convex hull of a finite set of affinely independent points of \(P\). </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000016">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p>By assumption, there is a finite set of points \(t_i\) in \(P\) and weights \(f_i\) such that \(x = \sum f_i t_i\), each \(f_i\) is non-negative and \(\sum f_i = 1\). Choose such a set of points of minimum cardinality. We argue by contradiction that such a set must be affinely independent. </p>
<p>Thus suppose that there is some vanishing combination \(\sum g_i t_i\) with \(\sum g_i = 0\) and not all \(g_i\) vanish. Let \(S = \{ i | g_i {\gt} 0\} \). Let \(i_0\) in \(S\) be an index minimizing \(f_i/g_i\). We shall obtain our contradiction by showing that \(x\) belongs to the convex hull of the set \(\{ t_i| i \ne i_0\} \), which has cardinality strictly smaller than \(\{ t_i\} \). </p>
<p>We thus define new weights \(k_i = f_i - g_i f_{i_0}/g_{i_0}\). These weights sum to \(\sum f_i - (\sum g_i)f_{i_0}/g_{i_0} = 1\) and \(k_{i_0} = 0\). Each \(k_i\) is non-negative, thanks to the choice of \(i_0\) if \(i\) is in \(S\) or using that \(f_i\), \(-g_i\) and \(f_{i_0}/g_{i_0}\) are all non-negative when \(i\) is not in \(S\). It remain to compute </p>
<div class="displaymath" id="a0000000017">
  \begin{align*}  \sum _{i ‚â† i_0} k_i t_i & = \sum _i k_i t_i \\ & = \sum _i (f_i - g_i f_{i_0}/g_{i_0}) t_i \\ & = \sum _i f_i t_i - \left(\sum _i g_i t_i\right)f_{i_0}/g_{i_0}) \\ & = x \end{align*}
</div>
<p> where we use \(k_{i_0} = 0\) in the first equality. </p>

  </div>
</div>
<p><div class="definition_thmwrapper" id="def:surrounds_points">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">1.5</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#def:surrounds_points">#</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L87">surrounding_pts</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="definition_thmcontent">
  <p>  A point \(x\) in \(E\) is surrounded by points \(p_0\), ‚Ä¶, \(p_d\) if those points are affinely independent and there exist weights \(w_i ‚àà (0, 1)\) with sum \(1\) such that \(x = \sum _i w_i p_i\). </p>

  </div>
</div> </p>
<p>Note that, in the above definition, the number of points \(p_i\) is fixed by the dimension \(d\) of \(E\), and that the weights \(w_i\) are the barycentric coordinates of \(x\) with respect to the affine basis \(p_0, \ldots , p_d\). </p>
<p><div class="lemma_thmwrapper" id="lem:interior_chab">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.6</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:interior_chab">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000018"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/mathlib/blob/5a017443e131d3f66eeda6d2a4dc038e899ca6d5/src/analysis/normed_space/add_torsor_bases.lean#L57">interior_convex_hull_aff_basis</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p> Given an affine basis \(b\) of \(E\), the interior of the convex hull of \(b\) is the set of points with strictly positive barycentric coordinates. </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000018">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p>For each \(i\), let: </p>
<div class="displaymath" id="a0000000019">
  \[  w_i \! :E \to ‚Ñù  \]
</div>
<p> be the \(i^{\rm th}\) barycentric coordinate with respect to the basis \(b\). Since \(E\) is finite-dimensional, each \(w_i\) is a continuous open map. For such a map, the operation of taking interior commutes with preimage, and so we have: </p>
<div class="displaymath" id="a0000000020">
  \begin{align*}  \operatorname{IntConv}(b) & = \operatorname{Int}\left(\bigcap _i w_i^{-1}([0, \infty ))\right)\\ & = \bigcap _i \operatorname{Int}(w_i^{-1}([0, \infty ))\\ & = \bigcap _i w_i^{-1}(\operatorname{Int}([0, \infty ))\\ & = \bigcap _i w_i^{-1}((0, \infty )) \end{align*}
</div>
<p> as required. </p>

  </div>
</div>
<p><div class="lemma_thmwrapper" id="lem:int_homothety_cvx">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.7</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:int_homothety_cvx">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000021"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/mathlib/blob/5a017443e131d3f66eeda6d2a4dc038e899ca6d5/src/analysis/convex/topology.lean#L263">convex.subset_interior_image_homothety_of_one_lt</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p> Given a point \(c\) of \(E\) and a real number \(t\), let: </p>
<div class="displaymath" id="a0000000022">
  \[  h^c_t \! :E \to E  \]
</div>
<p> be the homothety which dilates about \(c\) by a scale of \(t\). </p>
<p>Suppose \(c\) belongs to the interior of a convex subset \(C\) of \(E\) and \(t {\gt} 1\), then </p>
<div class="displaymath" id="a0000000023">
  \[  C \subseteq \operatorname{Int}(h^c_t(C))  \]
</div>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000021">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p>Since \(h^c_t\) is a homeomorphism with inverse \(h^c_{t^{-1}}\), taking \(s = t^{-1}\), the required result is equivalent to showing: </p>
<div class="displaymath" id="a0000000024">
  \[  h^c_s(C) \subseteq \operatorname{Int}(C)  \]
</div>
<p> where \(s \in (0, 1)\). </p>
<p>Let \(x\) be a point of \(C\), we must show there exists an open neighborhood \(U\) of \(h^c_s(x)\), contained in \(C\). In fact we claim: </p>
<div class="displaymath" id="a0000000025">
  \[  U = h^x_{1-s}(\operatorname{Int}(C))  \]
</div>
<p> is such a set. Indeed \(U\) is open since \(h^x_{1-s}\) is a homeomorphism and \(U\) contains \(h^c_s(x)\) since: </p>
<div class="displaymath" id="a0000000026">
  \[  h^c_s(x) = h^x_{1-s}(c) \in h^x_{1-s}(\operatorname{Int}(C))  \]
</div>
<p> since \(c\) belongs to \(\operatorname{Int}(C)\). Finally: </p>
<div class="displaymath" id="a0000000027">
  \[  h^x_{1-s}(\operatorname{Int}(C)) \subseteq h^x_{1-s}(C) \subseteq C  \]
</div>
<p> where the second inclusion follows since \(C\) is convex and contains \(x\). </p>

  </div>
</div>
<p><div class="lemma_thmwrapper" id="lem:int_cvx">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.8</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:int_cvx">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000028"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L161">surrounded_of_convex_hull</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p> If a point \(x\) of \(E\) lies in the convex hull of an open set \(P\), then it is surrounded by some collection of points belonging to \(P\). </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000028">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p> It follows from <a href="chap-loops.html#lem:interior_chab">Lemma 1.6</a> that we need only show that \(E\) has an affine basis \(b\) of points belonging to \(P\) such that \(x\) lies in the interior of the convex hull of \(b\). </p>
<p>Carath√©odory‚Äôs lemma&#160;<a href="chap-loops.html#lem:caratheodory">1.4</a> provides affinely independent points \(p_0, \dots , p_k\) in \(P\) such that \(x\) belongs to their convex hull. Since \(P\) is open, we may extend \(p_i\) to an affine basis </p>
<div class="displaymath" id="a0000000029">
  \[  \hat b = \{ p_0, \ldots , p_d\} ,  \]
</div>
<p> where all points still belong to \(P\). Note that \(x\) belongs to the convex hull of \(\hat b\). </p>
<p>Now let \(c\) be a point in the interior of the convex hull of \(\hat b\) (e.g., the centroid) and for each \(\epsilon {\gt} 0\), consider the homothety </p>
<div class="displaymath" id="a0000000030">
  \[  h_{1+\epsilon } \! :E \to E,  \]
</div>
<p> which dilates about \(c\) by a scale of \(1 + \epsilon \). </p>
<p>Since \(\hat b\) is finite and contained in \(P\), and \(P\) is open, there exists \(\epsilon {\gt} 0\) such that </p>
<div class="displaymath" id="a0000000031">
  \[  h_{1+\epsilon } (\hat b) \subseteq P.  \]
</div>
<p> We claim the required basis is: </p>
<div class="displaymath" id="a0000000032">
  \[  b = h_{1+\epsilon } (\hat b)  \]
</div>
<p> for any such \(\epsilon \). Indeed, applying <a href="chap-loops.html#lem:int_homothety_cvx">Lemma 1.7</a> to \(\operatorname{Conv}(\hat b)\) we see: </p>
<div class="displaymath" id="a0000000033">
  \begin{align*}  x \in \operatorname{Conv}(\hat b) & \subseteq \operatorname{Int}(h_{1+\epsilon } (\operatorname{Conv}(\hat b)))\\ & = \operatorname{Int}(\operatorname{Conv}(h_{1+\epsilon } (\hat b))) \end{align*}
</div>
<p> as required. </p>

  </div>
</div>
<p><div class="lemma_thmwrapper" id="lem:smooth_barycentric_coord">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.9</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:smooth_barycentric_coord">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000034"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:surrounds_points">Definition 1.5</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L187">smooth_surrounding</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   For every \(x\) in \(E\) and every collection of points \(p ‚àà E^{d+1}\) surrounding \(x\), there is a function \(w \! :E √ó E^{d+1} ‚Üí ‚Ñù^{d+1}\) such that, for every \((y, q)\) in a neighborhood of \((x, p)\), </p>
<ul class="itemize">
  <li><p>\(w\) is smooth at \((y, q)\) </p>
</li>
  <li><p>\(w(y, q) {\gt} 0\) </p>
</li>
  <li><p>\(\sum _{i=0}^d w_i(y, q) = 1\) </p>
</li>
  <li><p>\(y = \sum _{i=0}^d w_i(y, q)q_i\) </p>
</li>
</ul>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000034">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p>Let: </p>
<div class="displaymath" id="a0000000035">
  \begin{align*}  A = E \times \{  q \in E^{d+1} ~ |~  \mbox{$q$ is an affine basis for $E$} \} , \end{align*}
</div>
<p> and define: </p>
<div class="displaymath" id="a0000000036">
  \begin{align*}  w \! :A & \to ‚Ñù^{d+1}\\ (y, q) & \mapsto \mbox{barycentric coordinates of $y$ with respect to $q$}. \end{align*}
</div>
<p>If we fix an affine basis \(b\) of \(E\), we may express \(w\) as a ratio of determinants in terms of coordinates relative to \(b\). More precisely, by Cramer‚Äôs rule, if \(0 \le i \le d\) and \(w_i\) is the \(i^{\rm th}\) component of \(w\), then: </p>
<div class="displaymath" id="a0000000037">
  \begin{align*}  w_i (y, q) = \det M_i (y, q) / \det N (q) \end{align*}
</div>
<p> where \(N(q)\) is the \((d+1)\times (d+1)\) matrix whose columns are the barycentric coordinates of the components of \(q\) relative to \(b\), and \(M_i (y, q)\) is \(N(q)\) except with column \(i\) replaced by the barycentric coordinates of \(y\) relative to \(b\). </p>
<p>Since determinants are smooth functions and \((y, q) \mapsto \det N(q)\) is non-vanishing on \(A\), \(w\) is smooth on \(A\). </p>
<p>Finally define: </p>
<div class="displaymath" id="a0000000038">
  \begin{align*}  U = w^{-1}((0, \infty )^{d+1}), \end{align*}
</div>
<p> and note that \(U\) is open in \(A\), since it is the preimage of an open set under the continuous map \(w\). In fact since \(A\) is open, \(U\) is open as a subset of \(E \times E^{d+1}\). Note that \((x, p) \in U\) since \(p\) surrounds \(x\). </p>
<p>We may extend \(w\) to \(E \times E^{d+1}\) by giving it any values at all outside \(A\). </p>

  </div>
</div>
<h1 id="a0000000011">1.3 Constructing loops</h1>
<h2 id="sub:surrounding_families">1.3.1 Surrounding families</h2>

<p>It will be convenient to introduce some more vocabulary. </p>
<p><div class="definition_thmwrapper" id="def:surrounds">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">1.10</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#def:surrounds">#</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:surrounds_points">Definition 1.5</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L323">loop.surrounds</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="definition_thmcontent">
  <p>   We say a loop \(Œ≥\) surrounds a vector \(v\) if \(v\) is surrounded by a collection of points belonging to the image of \(Œ≥\). Also, we fix a base point \(0\) in \(ùïä^1\) and say a loop is based at some point \(b\) if \(0\) is sent to \(b\). </p>

  </div>
</div> </p>
<p>The first main task in proving <a href="chap-loops.html#prop:loops">Proposition 1.3</a> is to construct suitable families of loops \(Œ≥_x\) surrounding \(g(x)\), by assembling local families of loops. Those will then be reparametrized to get the correct average in the next section. In this section, we will work only with <em>continuous</em> loops. This will make constructions easier and we will smooth those loops in the end, taking advantage of the fact that \(Œ©\) and the surrounding condition are open. </p>
<p>Thanks to Carath√©odory‚Äôs lemma, constructing <em>one</em> such loop with values in some open \(O\) is easy as soon as \(v\) belongs to the convex hull of \(O\). </p>
<p><div class="lemma_thmwrapper" id="lem:loop_of_hull">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.11</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:loop_of_hull">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000039"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:surrounds">Definition 1.10</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L470">surrounding_loop_of_convex_hull</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   If a vector \(v\) is in the convex hull of a connected open subset \(O\) then, for every base point \(b ‚àà O\), there is a continuous family of loops \(Œ≥ \! :[0, 1] √ó ùïä^1 ‚Üí E, (t, s) ‚Ü¶ Œ≥^t(s)\) such that, for all \(t\) and \(s\): </p>
<ul class="itemize">
  <li><p>\(Œ≥^t\) is based at \(b\) </p>
</li>
  <li><p>\(Œ≥^0(s) = b\) </p>
</li>
  <li><p>\(Œ≥^t(s) ‚àà O\) </p>
</li>
  <li><p>\(Œ≥^1\) surrounds \(v\) </p>
</li>
</ul>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000039">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p> Since \(O\) is open, <a href="chap-loops.html#lem:int_cvx">Lemma 1.8</a> gives points \(p_i\) in \(O\) surrounding \(x\). Since \(O\) is open and connected, it is path connected. Let \(Œª \! :[0, 1] ‚Üí Œ©_x\) be a continuous path starting at \(b\) and going through the points \(p_i\). We can concatenate \(Œª\) and its opposite to get \(Œ≥^1\), say \(Œ≥^1(s) = Œª((1-\cos 2œÄs)/2)\). This is a round-trip loop: it back-tracks when it reaches \(Œª(1)\) at \(s = 1/2\). We then define \(Œ≥^t\) as the round-trip that stops at \(s = t/2\), stays still until \(s = 1-t/2\) and then backtracks. </p>

  </div>
</div>
<p><div class="definition_thmwrapper" id="def:family_surrounds">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">1.12</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#def:family_surrounds">#</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:surrounds">Definition 1.10</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L494">surrounding_family</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="definition_thmcontent">
  <p>   A continuous family of loops \(Œ≥ \! :E √ó [0, 1] √ó ùïä^1 ‚Üí F, (x, t, s) ‚Ü¶ Œ≥^t_x(s)\) surrounds a map \(g \! :E ‚Üí F\) with base \(Œ≤ \! :E ‚Üí F\) on \(U ‚äÇ E\) in \(Œ© ‚äÇ E √ó F\) if, for every \(x\) in \(U\), every \(t ‚àà [0, 1]\) and every \(s ‚àà ùïä^1\), </p>
<ul class="itemize">
  <li><p>\(Œ≥^t_x\) is based at \(Œ≤(x)\) </p>
</li>
  <li><p>\(Œ≥^0_x(s) = Œ≤(x)\) </p>
</li>
  <li><p>\(Œ≥^1_x\) surrounds \(g(x)\) </p>
</li>
  <li><p>\((x,Œ≥^t_x(s)) ‚àà Œ©\). </p>
</li>
</ul>
<p> The space of such families will be denoted by \(\operatorname{\mathcal{L}}(g, Œ≤, U, Œ©)\). </p>

  </div>
</div> </p>
<p>Families of surrounding loops are easy to construct locally. </p>
<p><div class="lemma_thmwrapper" id="lem:local_loops">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.13</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:local_loops">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000040"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:family_surrounds">Definition 1.12</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L730">local_loops</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Assume \(Œ©\) is open over some neighborhood of \(x_0\). If \(g(x_0)\) is in the convex hull of the connected component of \(Œ©_{x_0}\) containing \(Œ≤(x_0)\), then there is a continuous family of loops defined near \(x_0\), based at \(Œ≤\), taking value in \(Œ©\) and surrounding \(g\). </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000040">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p> In this proof we don‚Äôt mention the \(t\) parameter since it plays no role, but it is still there. <a href="chap-loops.html#lem:loop_of_hull">Lemma 1.11</a> gives a loop \(Œ≥\) based at \(Œ≤(x_0)\), taking values in \(Œ©_{x_0}\) and surrounding \(g(x_0)\). We set \(Œ≥_x(s) = Œ≤(x) + (Œ≥(s) - Œ≤(x_0))\). Each \(Œ≥_x\) takes values in \(Œ©_x\) because \(Œ©\) is open over some neighborhood of \(x_0\). <a href="chap-loops.html#lem:smooth_barycentric_coord">Lemma 1.9</a> guarantees that this loop surrounds \(g(x)\) for \(x\) close enough to \(x_0\). </p>

  </div>
</div>
<p>The difficulty in constructing global families of surrounding loops is that there are plenty of surrounding loops and we need to choose them consistently. The key feature of the above definition is that the \(t\) parameter not only allows us to cut out the corrugation process in the next chapter, but also brings a ‚Äúsatisfied or refund‚Äù guarantee, as explained in the next lemma. </p>
<p><div class="lemma_thmwrapper" id="lem:satisfied_or_refund">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.14</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:satisfied_or_refund">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000041"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:family_surrounds">Definition 1.12</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L943">satisfied_or_refund</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   For every set \(U ‚äÇ E\), \(\operatorname{\mathcal{L}}(g, Œ≤, U, Œ©)\) is contractible: for every \(Œ≥_0\) and \(Œ≥_1\) in \(\operatorname{\mathcal{L}}(g, Œ≤, U, Œ©)\), there is a continuous map \(Œ¥ \! :[0, 1] √ó E √ó [0, 1] √ó ùïä^1 ‚Üí F, (œÑ, x, t, s) ‚Ü¶ Œ¥^t_{œÑ, x}(s)\) which interpolates between \(Œ≥_0\) and \(Œ≥_1\) in \(\operatorname{\mathcal{L}}(g, Œ≤, U, Œ©)\). </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000041">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p>Let \(œÅ\) be the piecewise affine map from \(‚Ñù\) to \(‚Ñù\) such that \(œÅ(œÑ) = 1\) if \(œÑ ‚â§ 1/2\), \(œÅ\) is affine on \([1/2, 1]\), \(œÅ(œÑ) = 0\) if \(œÑ ‚â• 1\). We set </p>
<div class="displaymath" id="a0000000042">
  \[  Œ¥_{œÑ, x}^t(s) = \begin{cases}  Œ≥_{0,x}^{œÅ(œÑ)t}\left(\frac1{1 - œÑ} s\right) &  \text{if $s ‚â§ 1 - œÑ$ and $œÑ {\lt} 1$}\\ Œ≥_{1,x}^{œÅ(1-œÑ)t}\left(\frac1œÑ \big (s - (1- œÑ)\big )\right) &  \text{if $s ‚â• 1 - œÑ$ and $œÑ {\gt} 0$}\\ \end{cases}  \]
</div>
<p> It is clear that if \(s = 1 - œÑ\) then both branches agree and are equal to \(Œ≤(x)\). Therefore it is easy to see that \(Œ¥\) is continuous at \((œÑ, x, t, s)\) except when \((œÑ,s)=(1,0)\) or \((œÑ,s)=(0,1)\). </p>
<p>To show the continuity for \((œÑ,s)=(1,0)\), let \(K\) be a compact neighborhood of \(x\) in \(E\). Then \(Œ≥_0\) is uniformly continuous on the compact set \(K √ó [0, 1] √ó ùïä^1\), which means that \(Œ≥_{0,x'}^t\) tends uniformly to the constant function \(s ‚Ü¶ Œ≤(x)\) as \((x', t)\) tends to \((x, 0)\). This means that \(Œ≥_{0,x'}^{œÅ(œÑ)t'}\) tends uniformly to the constant function \(s ‚Ü¶ Œ≤(x)\) as \((œÑ, x', t')\) tends to \((1, x, t)\). This means that \(Œ¥\) is continuous at \((œÑ,s)=(1,0)\) (it is clear that the other branch also tends to \(Œ≤(x)\)). The continuity at \((œÑ,s)=(0,1)\) is entirely analogous. </p>
<p>The beautiful observation motivating the above formula is why each \(Œ¥_{œÑ, x}^1\) surrounds \(g(x)\). The key is that the image of \(Œ¥_{œÑ, x}^1\) contains the image of \(Œ≥_{0,x}^1\) when \(œÑ ‚â§ 1/2\), and contains the image of \(Œ≥_{1,x}^1\) when \(œÑ ‚â• 1/2\). Hence \(Œ¥_{œÑ, x}^1\) always surrounds \(g(x)\). </p>

  </div>
</div>
<p><div class="corollary_thmwrapper" id="cor:extend_loops">
  <div class="corollary_thmheading">
    <span class="corollary_thmcaption">
    Corollary
    </span>
    <span class="corollary_thmlabel">1.15</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#cor:extend_loops">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000043"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:family_surrounds">Definition 1.12</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L976">extend_loops</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="corollary_thmcontent">
  <p>   Let \(U_0\) and \(U_1\) be open sets in \(E\). Let \(K_0 ‚äÇ U_0\) and \(K_1 ‚äÇ U_1\) be compact subsets. For any \(Œ≥_0 ‚àà \operatorname{\mathcal{L}}(U_0, g, Œ≤, Œ©)\) and \(Œ≥_1 ‚àà \operatorname{\mathcal{L}}(U_1, g, Œ≤, Œ©)\), there exists \(U ‚àà ùìù(K_0 ‚à™ K_1)\) and there exists \(Œ≥ ‚àà \operatorname{\mathcal{L}}(U, g, Œ≤, Œ©)\) which coincides with \(Œ≥_0\) near \(K_0\cup U_1^c\). </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000043">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p> Let \(C_0 = K_0\cup U_1^c\) and \(C_1 := K_1 ‚àñ U_0\). Since \(C_0\) and \(C_1\) are disjoint closed sets, there is some continuous cut-off \(œÅ \! :E ‚Üí [0, 1]\) which vanishes on a neighborhood of \(C_0\) and equals one on a neighborhood of \(C_1\). </p>
<p><a href="chap-loops.html#lem:satisfied_or_refund">Lemma 1.14</a> gives a homotopy of loops \(Œ≥_œÑ\) from \(Œ≥_0\) to \(Œ≥_1\) on \(U_0 ‚à© U_1\). Moreover, note that \(Œ≥_œÑ\) is defined on all of \(E\). On \(U_0' ‚à™ (U_0 ‚à© U_1) ‚à™ U_1'\), which is a neighborhood of \(K_0 ‚à™ K_1\), we set </p>
<div class="displaymath" id="a0000000044">
  \[  Œ≥_x = Œ≥_{œÅ(x), x}  \]
</div>
<p> which has the required properties. </p>

  </div>
</div>
<p><div class="lemma_thmwrapper" id="lem:‚àÉ_surrounding_loops">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.16</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:‚àÉ_surrounding_loops">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000045"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:family_surrounds">Definition 1.12</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/surrounding.lean#L1238">exists_surrounding_loops</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   In the setup of <a href="chap-loops.html#prop:loops">Proposition 1.3</a>, assume we have a continuous family \(Œ≥\) of loops defined near \(K\) which is based at \(Œ≤\), surrounds \(g\) and such that each \(Œ≥_x^t\) takes values in \(Œ©_x\). Then there such a family which is defined on all of \(E\) and agrees with \(Œ≥\) near \(K\). </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000045">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p> Let \(U_0\) be an open set containing \(K\) such that \(Œ≥\) forms a surrounding family of loops on \(U_0\). Let \(U_i\), \(i ‚â• 1\) be a locally finite family of open sets with local surrounding families of loops \(Œ≥^i\) and compact subsets \(K_i ‚äÇ U_i\) covering \(E\). </p>
<p>This is possible, since by <a href="chap-loops.html#lem:local_loops">Lemma 1.13</a> there is a local surrounding family of loops around each point in \(E\). Since \(E\) is locally compact we may pick a compact neighborhood around each point in \(E\) with such a local family of loops. Since \(E\) is paracompact second countable, we can pick a countable refinement \(U_i\) which is locally finite and still covers \(E\). By the shrinking lemma we can pick closed (and hence compact) subsets \(K_i ‚äÇ U_i\) that also cover \(E\). </p>
<p>Now we define a family \((Œ¥^i)_{i \in NN}\) by \(Œ¥^0 = Œ≥|_{U_0}\) and \(Œ¥^{i+1}\) is obtained by extending \(Œ¥^i\) using \(Œ≥^i\) via <a href="chap-loops.html#cor:extend_loops">Corollary 1.15</a>. Since \(Œ¥^{i+1}\) equals \(Œ¥^i\) on \(U_i^c\), this sequence is locally eventually constant. Therefore it has a well-defined limit \(Œ¥\) which is defined and continuous on all \(E\). Since \(Œ¥^{i+1}\) equals \(Œ¥^i\) on a neighborhood of \(K\cup \bigcup _{j{\lt}i} K_i,\) we know in particular that \(Œ¥^i\) equals \(Œ≥\) on a neighborhood of \(K\). Since \(K\) is compact, it has some neighborhood \(O\) such that \(Œ¥^i|_{O}\) is eventually constant with eventual value \(Œ¥|_{O}\). Hence \(Œ¥=Œ≥\) on a neighborhood of \(K\). </p>

  </div>
</div>
<h2 id="sub:the_reparametrization_lemma">1.3.2 The reparametrization lemma</h2>

<p>The second ingredient needed to prove <a href="chap-loops.html#prop:loops">Proposition 1.3</a> is a parametric reparametrization lemma. </p>
<p><div class="lemma_thmwrapper" id="lem:reparametrization">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">1.17</span>
    ‚úì
    <div class="thm_icons">
    <a class="icon proof" href="chap-loops.html#lem:reparametrization">#</a>
    <a class="icon proof" href="chap-loops.html#a0000000046"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="chap-loops.html#def:surrounds">Definition 1.10</a></li>
          <li><a href="chap-loops.html#def:average">Definition 1.1</a></li>
        </ul>

      </div>
    </div>
    <button class="modal lean">L‚àÉ‚àÄN</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="https://github.com/leanprover-community/sphere-eversion//blob/12b5051e4d04e6d2f4a7bf285d0b3eb0fca4f3a8/src/loops/reparametrization.lean#L499">smooth_surrounding_family.reparametrize_average</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(Œ≥ \! :E √ó ùïä^1 ‚Üí F\) be a smooth family of loops surrounding a map \(g\). There is a smooth family of equivalences \(œÜ \! :E √ó ùïä^1 ‚Üí ùïä^1\) such that each \(Œ≥_x ‚àò œÜ_x\) has average \(g(x)\) and \(œÜ_x(0) = 0\). </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000046">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p> For any fixed \(x\), since \(Œ≥_x\) strictly surrounds \(g(x)\), there are points \(s_1, ‚Ä¶, s_{n+1}\) in \(ùïä^1\) such that \(g(x)\) is surrounded by the corresponding points \(Œ≥_x(s_j)\). </p>
<p>Let \(Œº_1, ‚Ä¶, Œº_{n+1}\) be smooth positive probability measures very close to the Dirac measures on \(s_j\) (ie. \(Œº_j = f_j\,  ds\) for some smooth positive function \(f_j\) and, for any function \(h\), \(\int h\, dŒº_j\) is almost \(h(s_j)\)). We set \(p_j = \int Œ≥_x\,  d\mu _j\), which is almost \(Œ≥_x(s_j)\) so that \(g(x) = \sum w_j p_j\) for some weights \(w_j\) in the open interval \((0, 1)\) according to <a href="chap-loops.html#lem:smooth_barycentric_coord">Lemma 1.9</a>. </p>
<p>If \(x'\) is in a sufficiently small neighborhood of \(x\), <a href="chap-loops.html#lem:smooth_barycentric_coord">Lemma 1.9</a> gives smooth weight functions \(w_j\) such that \(g(x') = \sum w_j(x')p_j(x')\). Let \(U^i\), \(i ‚â• 1\) be a locally finite cover of \(E\) by such neighborhoods, with corresponding measures \(Œº_j^i\), moving points \(p_j^i\) and weight functions \(w_j^i\). Let \((œÅ_i)\) be a partition of unity associated to this covering. For every \(x\), we set </p>
<div class="displaymath" id="a0000000047">
  \[  Œº_x = \sum _{i=1}^‚àû \sum _{j=1}^{n+1} œÅ_i(x)w_j^i(x)\,  Œº_j^i  \]
</div>
<p> so that: </p>
<div class="displaymath" id="a0000000048">
  \begin{align*}  \int Œ≥_x\,  dŒº_x & = \sum _i œÅ_i(x)\sum _{j=1}^{n+1} w_j^i(x) \int Œ≥_x\,  dŒº_j^i\\ & = \sum _i œÅ_i(x)\sum _{j=1}^{n+1} w_j^i(x) p_j^i(x)\\ & = \sum _i œÅ_i(x) g(x) = g(x). \end{align*}
</div>
<p> We now set \(œÜ_x^{-1}(t) = \int _0^tdŒº_x\) so that \(g(x) = \overline{Œ≥_x ‚àò œÜ_x}\) for all \(x\). </p>

  </div>
</div>
<h2 id="sub:proof_of_the_loop_construction_proposition">1.3.3 Proof of the loop construction proposition</h2>

<p>We finally assemble the ingredients from the previous two sections. </p>
<div class="proof_wrapper" id="a0000000014">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof of <a href="chap-loops.html#prop:loops">Proposition 1.3</a>
    </span>
    <span class="expand-proof">‚ñº</span>
  </div>
  <div class="proof_content">
  <p>   Let \(Œ≥^*\) be a family of loops surrounding the origin in \(F\), constructed using <a href="chap-loops.html#lem:local_loops">Lemma 1.13</a>. For \(x\) in some neighborhood \(U^*\) of \(K\) where \(g = Œ≤\), we set \(Œ≥_x = g(x) + ŒµŒ≥^*\) where \(Œµ {\gt} 0\) is sufficiently small to ensure the image of \(Œ≥_x\) and its convex hull are contained in \(Œ©_x\) (recall \(Œ©\) is open and \(K\) is compact). <a href="chap-loops.html#lem:‚àÉ_surrounding_loops">Lemma 1.16</a> extends this family to a continuous family of surrounding loops \(Œ≥_x\) for all \(x\) (this is not yet our final \(Œ≥\)). </p>
<p>We then need to approximate this continuous family by a smooth one. Some care is needed to ensure that it stays based at \(Œ≤\). For instance, we can first compose each loop by some fixed surjective continuous map from \(ùïä^1\) to itself that sends a neighborhood of \(0\) to \(0\). This way each loop becomes constant near \(0\), and a convolution smoothing will then keep the value at \(0\). If the smoothing is sufficiently \(C^0\) small then the new \(Œ≥\) is still surrounding and takes values in \(Œ©\). </p>
<p>Then <a href="chap-loops.html#lem:reparametrization">Lemma 1.17</a> gives a family of circle diffeomorphisms \(h_x\) such that \(Œ≥^1_x ‚àò h_x\) has average \(g(x)\). </p>
<p>Finally we choose a cut-off function function \(œá\) which vanishes near \(K\) and equals one near \(E ‚àñ U^*\). In \(U^*\), we replace \(Œ≥_x ‚àò h_x = g(x) + Œ≥^* ‚àò h_x\) by \(g(x) + œá(x)Œ≥^* ‚àò h_x\). This operation does not change the average values of these loops, because it rescales them around their average value, but makes them constant on \(\operatorname{Op}{K}\). Also, those loops stay in \(Œ©\), thanks to our choice of \(Œµ\). </p>

  </div>
</div>

</div> <!--main-text -->
</div> <!-- content-wrapper -->
</div> <!-- content -->
</div> <!-- wrapper -->

<nav class="prev_up_next">
  <svg  id="showmore-minus" class="icon icon-eye-minus showmore"><use xlink:href="symbol-defs.svg#icon-eye-minus"></use></svg>

  <svg  id="showmore-plus" class="icon icon-eye-plus showmore"><use xlink:href="symbol-defs.svg#icon-eye-plus"></use></svg>

  <a href="sect0001.html" title="Introduction"><svg  class="icon icon-arrow-left "><use xlink:href="symbol-defs.svg#icon-arrow-left"></use></svg>
</a>
  <a href="index.html" title="The sphere eversion project"><svg  class="icon icon-arrow-up "><use xlink:href="symbol-defs.svg#icon-arrow-up"></use></svg>
</a>
  <a href="chap-local.html" title="Local theory of convex integration"><svg  class="icon icon-arrow-right "><use xlink:href="symbol-defs.svg#icon-arrow-right"></use></svg>
</a>
</nav>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/plastex.js"></script>
<script type="text/javascript" src="js/svgxuse.js"></script>
<script type="text/javascript" src="js/js.cookie.min.js"></script>
<script type="text/javascript" src="js/showmore.js"></script>
</body>
</html>